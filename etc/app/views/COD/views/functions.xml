<config xmlns="http://software.in2p3.fr/lavoisier/config.xsd" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:date="http://exslt.org/dates-and-times" version="14">


    <view name="COD-alert-DowntimeOneMonth">
        <info>
            <category>Hidden</category>
            <description>COD functions</description>
        </info>
        <argument name="date_end"/>
        <argument name="date_start"/>
        <connector type="StringConnector">
            <parameter name="content" eval="choose(view('P-extract',entry('P-duration', date:difference( date:format-date($date_start,property('date_format')),                                                             date:format-date($date_end,property('date_format'))))                        | entry('P-separator','month')) &gt; 1, 1, 0) "/>

        </connector>
        <serializer type="EncapsulateSerializer"/>

    </view>


    <view name="DowntimeDuration">
        <info>
            <category>Hidden</category>
            <description>COD functions</description>
        </info>
        <argument name="date_end"/>
        <argument name="date_start"/>
        <connector type="StringConnector">
            <parameter name="content" eval="date:difference(date:format-date($date_start,property('date_format')), date:format-date($date_end,property('date_format'))) "/>
        </connector>
        <serializer type="EncapsulateSerializer"/>

    </view>


    <view name="COD-alert-TicketExpired">
        <info>
            <category>Hidden</category>
            <description>COD functions</description>
        </info>
        <argument name="date"/>
        <connector type="StringConnector">
            <parameter name="content" eval="choose(                        view('diffWWE',                         entry('date_start',date:format-date($date,property('date_format')))                         |  entry('date_end', view('UTC-now', entry('format',property('date_format')))/*/*/text())                         | entry('granularity','day')) &gt; 3, 1, 0)"/>
        </connector>
        <serializer type="EncapsulateSerializer"/>

    </view>

   <view name="COD-alert-TicketOneMonth">
        <info>
            <category>Hidden</category>
            <description>COD functions</description>
        </info>
        <argument name="date"/>
        <connector type="StringConnector">
            <parameter name="content" eval="choose(                         view('P-extract',                            entry('P-duration',                                 date:difference(                                         view('UTC-now', entry('format',property('date_format')))/*/*/text(),                                         date:format-date($date,property('date_format')))                                    )                             | entry('P-separator','month')) &gt; 1, 2, 0)"/>
        </connector>
        <serializer type="EncapsulateSerializer"/>

    </view>

    <view name="COD-alert-NagiosExpired">
        <info>
            <category>Hidden</category>
            <description>COD functions</description>
        </info>
        <argument name="date"/>
        <connector type="StringConnector">
            <parameter name="content" eval="choose(                        view('diffWWE',                         entry('date_start',date:format-date($date,property('date_format')))                         | entry('date_end', view('UTC-now', entry('format',property('date_format')))/*/*/text())                         | entry('granularity','hour')) &gt; 74, 1, 0)"/>
        </connector>
        <serializer type="EncapsulateSerializer"/>

    </view>

</config>